(this["webpackJsonpmovies-explorer-frontend"]=this["webpackJsonpmovies-explorer-frontend"]||[]).push([[0],Array(27).concat([function(e,t,a){},,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),c=a(18),o=a.n(c),i=(a(27),a(2)),r=a(4),l=a(9),m=a(22),d=a(0),u=function(e){var t=e.component,a=Object(m.a)(e,["component"]);return Object(d.jsx)(r.b,{children:function(){return a.loggedIn?Object(d.jsx)(t,Object(l.a)({},a)):Object(d.jsx)(r.a,{to:"./signin"})}})};a(34),a(35);var j=function(){return Object(d.jsx)("section",{className:"promo",children:Object(d.jsx)("div",{className:"promo__title",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442\u0430 \u0412\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438."})})};a(36);var h=function(){return Object(d.jsxs)("section",{className:"about-project",children:[Object(d.jsx)("h2",{className:"about-project__title",children:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"}),Object(d.jsxs)("div",{className:"about-project__main",children:[Object(d.jsxs)("div",{className:"about-project__block",children:[Object(d.jsx)("h3",{className:"about-project__block-title",children:"\u0414\u0438\u043f\u043b\u043e\u043c\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u043b 5 \u044d\u0442\u0430\u043f\u043e\u0432"}),Object(d.jsx)("p",{className:"about-project__block-description",children:"\u0421\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u043d\u0430, \u0440\u0430\u0431\u043e\u0442\u0443 \u043d\u0430\u0434 \u0431\u044d\u043a\u0435\u043d\u0434\u043e\u043c, \u0432\u0451\u0440\u0441\u0442\u043a\u0443, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438 \u0444\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0438."})]}),Object(d.jsxs)("div",{className:"about-project__block",children:[Object(d.jsx)("h3",{className:"about-project__block-title",children:"\u041d\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0434\u0438\u043f\u043b\u043e\u043c\u0430 \u0443\u0448\u043b\u043e 5 \u043d\u0435\u0434\u0435\u043b\u044c"}),Object(d.jsx)("p",{className:"about-project__block-description",children:"\u0423 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u044d\u0442\u0430\u043f\u0430 \u0431\u044b\u043b \u043c\u044f\u0433\u043a\u0438\u0439 \u0438 \u0436\u0451\u0441\u0442\u043a\u0438\u0439 \u0434\u0435\u0434\u043b\u0430\u0439\u043d, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0443\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0441\u043e\u0431\u043b\u044e\u0434\u0430\u0442\u044c, \u0447\u0442\u043e\u0431\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0449\u0438\u0442\u0438\u0442\u044c\u0441\u044f."})]})]}),Object(d.jsxs)("div",{className:"about-project__weeks",children:[Object(d.jsx)("div",{className:"about-project__week-green",children:"1 \u043d\u0435\u0434\u0435\u043b\u044f"}),Object(d.jsx)("div",{className:"about-project__week-dark",children:"4 \u043d\u0435\u0434\u0435\u043b\u0438"})]}),Object(d.jsxs)("div",{className:"about-project__weeks",children:[Object(d.jsx)("div",{className:"about-project__week-green about-project__back-front",children:"Back-end"}),Object(d.jsx)("div",{className:"about-project__week-dark about-project__back-front",children:"Front-end"})]})]})};a(37);var b=function(){return Object(d.jsxs)("section",{className:"techs",children:[Object(d.jsx)("h2",{className:"techs__title",children:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"}),Object(d.jsx)("h3",{className:"techs__subtitle",children:"7 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0439"}),Object(d.jsx)("p",{className:"techs__text",children:"\u041d\u0430 \u043a\u0443\u0440\u0441\u0435 \u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043c\u044b \u043e\u0441\u0432\u043e\u0438\u043b\u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043b\u0438 \u0432 \u0434\u0438\u043f\u043b\u043e\u043c\u043d\u043e\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0435."}),Object(d.jsxs)("ul",{className:"techs__list",children:[Object(d.jsx)("li",{className:"techs__list_item",children:"HTML"}),Object(d.jsx)("li",{className:"techs__list_item",children:"CSS"}),Object(d.jsx)("li",{className:"techs__list_item",children:"JS"}),Object(d.jsx)("li",{className:"techs__list_item",children:"React"}),Object(d.jsx)("li",{className:"techs__list_item",children:"Git"}),Object(d.jsx)("li",{className:"techs__list_item",children:"Express.js"}),Object(d.jsx)("li",{className:"techs__list_item",children:"mongoDB"})]})]})},_=a.p+"static/media/me.3d4e4644.jfif";a(38);var p=function(){return Object(d.jsxs)("div",{className:"about-me",children:[Object(d.jsx)("h2",{className:"about-me__title",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"}),Object(d.jsxs)("div",{className:"about-me__main",children:[Object(d.jsxs)("div",{className:"about-me__info",children:[Object(d.jsx)("h3",{className:"about-me__name",children:"\u0410\u043b\u0435\u043a\u0441\u0435\u0439"}),Object(d.jsx)("p",{className:"about-me__profession",children:"\u041d\u0430\u0447\u0438\u043d\u0430\u044e\u0449\u0438\u0439 \u0444\u0440\u043e\u043d\u0442\u0435\u043d\u0434-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a, 31 \u0433\u043e\u0434"}),Object(d.jsx)("p",{className:"about-me__text",children:"\u042f \u0436\u0438\u0432\u0443 \u0432 \u041c\u043e\u0441\u043a\u0432\u0435. \u0417\u0430\u043a\u043e\u043d\u0447\u0438\u043b \u0412\u0417\u0424\u042d\u0418, \u0440\u0430\u0431\u043e\u0442\u0430\u044e \u0430\u0432\u0438\u0430\u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u043e\u043c \u0432 \u0441\u0444\u0435\u0440\u0435 \u0430\u0432\u0438\u0430\u0446\u0438\u0438 \u0432 \u043e\u0442\u0434\u0435\u043b\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043e\u043a. \u041c\u043d\u0435 \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f \u043c\u043e\u044f \u0440\u0430\u0431\u043e\u0442\u0430, \u043d\u043e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u0435\u0435, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0441\u043e\u0431\u0438\u0440\u0430\u044e\u0441\u044c \u0441\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0444\u0435\u0440\u0443 \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438.  \u0412 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u0438\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443 \u0438\u043c\u0435\u043d\u043d\u043e \u0432 IT. "}),Object(d.jsxs)("ul",{className:"about-me__socials",children:[Object(d.jsx)("li",{className:"about-me__social",children:Object(d.jsx)("a",{className:"about-me__link",target:"blank",href:"https://ru-ru.facebook.com/",children:"Facebook"})}),Object(d.jsx)("li",{className:"about-me__social",children:Object(d.jsx)("a",{className:"about-me__link",target:"blank",href:"https://github.com/azhukovalex",children:"Github"})})]})]}),Object(d.jsx)("img",{className:"about-me__photo",src:_,alt:"\u0424\u043e\u0442\u043e \u0430\u0432\u0442\u043e\u0440\u0430"})]})]})};a(39);var f=function(){return Object(d.jsxs)("div",{className:"portfolio",children:[Object(d.jsx)("h2",{className:"portfolio__title",children:"\u041f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e"}),Object(d.jsxs)("ul",{className:"portfolio__links",children:[Object(d.jsx)("li",{className:"portfolio__item",children:Object(d.jsx)("a",{className:"portfolio__link",target:"blank",href:"https://azhukovalex.github.io/how-to-learn/",children:"\u0421\u0442\u0430\u0442\u0438\u0447\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"})}),Object(d.jsx)("li",{className:"portfolio__item",children:Object(d.jsx)("a",{className:"portfolio__link",target:"blank",href:"https://azhukovalex.github.io/russian-travel/",children:"\u0410\u0434\u0430\u043f\u0442\u0438\u0432\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"})}),Object(d.jsx)("li",{className:"portfolio__item",children:Object(d.jsx)("a",{className:"portfolio__link",target:"blank",href:"https://azhukovalex.github.io/mesto-react/",children:"\u041e\u0434\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u0438\u0447\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435"})})]})]})};var v=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("main",{className:"main",children:[Object(d.jsx)(j,{}),Object(d.jsx)(h,{}),Object(d.jsx)(b,{}),Object(d.jsx)(p,{}),Object(d.jsx)(f,{})]})})},g=a.p+"static/media/logo__COLOR_main-1.b2d2abe1.svg",O=(a(40),a(3)),x=a.p+"static/media/profile__logo.524f8ef7.svg";var N=function(e){var t=e.userData,a=e.loggedIn,s=t?t.name:"",c=n.a.useState(!1),o=Object(i.a)(c,2),r=o[0],l=o[1],m="".concat(r?"header__nav header__nav-mob_visible":" header__nav header__nav-mob_invisible");function u(){l(!r)}return a?Object(d.jsxs)("nav",{className:"header__nav",children:[Object(d.jsx)("button",{className:"header__burger-btn header__burger-btn_invisible",onClick:u}),Object(d.jsxs)("div",{className:m,children:[Object(d.jsx)("button",{className:"header__nav-close-btn",onClick:u}),Object(d.jsxs)("div",{className:"header__nav-links",children:[Object(d.jsx)(O.c,{exact:!0,to:"/",className:"header__nav-movies header__nav-main",activeClassName:"active-link",onClick:u,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(d.jsx)(O.c,{to:"/movies",className:"header__nav-movies",activeClassName:"active-link",onClick:u,children:"\u0424\u0438\u043b\u044c\u043c\u044b"}),Object(d.jsx)(O.c,{to:"/saved-movies",className:"header__nav-saved",activeClassName:"active-link",onClick:u,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"})]}),Object(d.jsxs)(O.c,{to:"/profile",className:"header__nav-profile",activeClassName:"active-link",onClick:u,children:[s,Object(d.jsx)("img",{className:"nav__user-icon",src:x,alt:"\u0424\u043e\u0442\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]})]})]}):Object(d.jsxs)("nav",{className:"header__nav",children:[Object(d.jsx)(O.c,{to:"/signup",className:"header__nav-item",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(d.jsx)(O.c,{to:"/signin",className:"header__nav-link",children:"\u0412\u043e\u0439\u0442\u0438"})]})};a(41);var S=function(e){var t=e.userData,a=e.loggedIn,s=Object(r.h)().pathname;return Object(d.jsxs)("header",{className:"/"===s?"header":"/movies"===s||"/saved-movies"===s||"/profile"===s?"header header__dark":"header__none",children:[Object(d.jsxs)(O.b,{to:"/",children:[" ",Object(d.jsx)("img",{className:"header__logo",src:g,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})]}),Object(d.jsx)(N,{userData:t,loggedIn:a})]})};a(42);var k=function(){var e=Object(r.h)().pathname;return Object(d.jsxs)("footer",{className:"/movies"===e||"/saved-movies"===e||"/"===e?"footer":"footer__none",children:[Object(d.jsx)("h2",{className:"footer__title",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c \u0445 BeatFilm."}),Object(d.jsxs)("div",{className:"footer__info",children:[Object(d.jsx)("p",{className:"footer__date",children:"\xa9 2021"}),Object(d.jsxs)("ul",{className:"footer__socials",children:[Object(d.jsx)("li",{className:"footer__social",children:Object(d.jsx)("a",{className:"footer__link",target:"blank",href:"https://praktikum.yandex.ru",children:"\u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c"})}),Object(d.jsx)("li",{className:"footer__social",children:Object(d.jsx)("a",{className:"footer__link",target:"blank",href:"https://github.com/",children:"Github"})}),Object(d.jsx)("li",{className:"footer__social",children:Object(d.jsx)("a",{className:"footer__link",target:"blank",href:"https://ru-ru.facebook.com/",children:"Facebook"})})]})]})]})},y=(a(43),a(11));function M(){var e=n.a.useState({}),t=Object(i.a)(e,2),a=t[0],c=t[1],o=n.a.useState({}),r=Object(i.a)(o,2),m=r[0],d=r[1],u=n.a.useState(!1),j=Object(i.a)(u,2),h=j[0],b=j[1],_=Object(s.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];c(e),d(t),b(a)}),[c,d,b]);return{values:a,handleChange:function(e){var t=e.target,s=t.name,n=t.value;c(Object(l.a)(Object(l.a)({},a),{},Object(y.a)({},s,n))),d(Object(l.a)(Object(l.a)({},m),{},Object(y.a)({},s,t.validationMessage))),b(t.closest("form").checkValidity())},errors:m,isValid:h,resetForm:_}}var w=function(e){var t=M(),a=t.values,s=t.handleChange,c=t.errors,o=t.isValid,i=t.resetForm,r=e.onRegister,l=e.loggedIn,m=e.setIsLoggedIn,u="".concat(o?"reg-form__submit":"reg-form__submit reg-form__submit__error"),j="".concat(o?"reg-form__input":"reg-form__input reg-form__input__error");return n.a.useEffect((function(){m(!0)}),[l]),Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"reg",children:Object(d.jsxs)("form",{className:"reg-form",onSubmit:function(e){e.preventDefault(),r(a),i()},noValidate:!0,children:[Object(d.jsxs)(O.b,{className:"reg-form__logo-link",to:"/",children:[" ",Object(d.jsx)("img",{src:g,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f",className:"reg-form__logo"})," "]}),Object(d.jsx)("h1",{className:"reg-form__title",children:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!"}),Object(d.jsx)("label",{className:"reg-form__label",children:"\u0418\u043c\u044f"}),Object(d.jsx)("input",{className:"reg-form__input",onChange:s,minLength:"2",maxLength:"30",type:"text",name:"name",required:!0,autoComplete:"off",value:a.name}),Object(d.jsx)("span",{className:"reg-form__valid-text reg-form__valid-text_non-valid",children:c.name||""}),Object(d.jsx)("label",{className:"reg-form__label",children:"E-mail"}),Object(d.jsx)("input",{className:"reg-form__input",onChange:s,minLength:"2",maxLength:"30",type:"email",name:"email",id:"email",required:!0,autoComplete:"off",value:a.email}),Object(d.jsx)("span",{className:"reg-form__valid-text reg-form__valid-text_non-valid",children:c.email||""}),Object(d.jsx)("label",{className:"reg-form__label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(d.jsx)("input",{className:j,onChange:s,minLength:"4",type:"password",name:"password",id:"password",required:!0,autoComplete:"off",value:a.password}),Object(d.jsx)("span",{className:"reg-form__valid-text reg-form__valid-text_non-valid",children:c.password||""}),Object(d.jsx)("button",{className:u,type:"submit",disabled:!o,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(d.jsxs)("span",{className:"reg-form__text",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?\xa0",Object(d.jsx)(O.b,{to:"/signin",className:"reg-form__link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})})};a(44);var C=function(e){var t=e.onLogin,a=e.setIsLoggedIn,s=M(),c=s.values,o=s.handleChange,i=s.errors,l=s.isValid,m=s.resetForm,u="".concat(l?"login-form__input":"login-form__input login-form__input__error"),j="".concat(l?"login-form__submit":"login-form__submit login-form__submit__error"),h=Object(r.g)();return n.a.useEffect((function(){a(!1)}),[a]),Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"login",children:Object(d.jsxs)("form",{className:"login-form",onSubmit:function(e){e.preventDefault(),t(c).then((function(){h.push("/")})).catch((function(e){console.log(e)})),m()},children:[Object(d.jsxs)(O.b,{className:"login-form__logo-link",to:"/",children:[" ",Object(d.jsx)("img",{src:g,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f",className:"login-form__logo"})," "]}),Object(d.jsx)("h1",{className:"login-form__title",children:"\u0420\u0430\u0434\u044b \u0432\u0438\u0434\u0435\u0442\u044c!"}),Object(d.jsx)("label",{className:"login-form__label",children:"          E-mail   "}),Object(d.jsx)("input",{type:"email",name:"email",id:"email",required:!0,className:"login-form__input",value:c.email,onChange:o}),Object(d.jsx)("span",{className:"login-form__valid-text login-form__valid-text_non-valid",children:i.email||""}),Object(d.jsx)("label",{className:"login-form__label",children:"          \u041f\u0430\u0440\u043e\u043b\u044c       "}),Object(d.jsx)("input",{className:u,minLength:6,type:"password",name:"password",id:"password",value:c.password,required:!0,onChange:o}),Object(d.jsx)("span",{className:"login-form__valid-text login-form__valid-text_non-valid",children:i.password||""}),Object(d.jsx)("button",{className:j,type:"submit",disabled:!l,children:"\u0412\u043e\u0439\u0442\u0438"}),Object(d.jsxs)("span",{className:"login-form__text",children:["\u0415\u0449\u0435 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?\xa0",Object(d.jsx)(O.b,{to:"/signup",className:"login-form__link",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})]})})})};a(45);var I=function(){var e=Object(r.g)();return Object(d.jsxs)("section",{className:"not-found-error",children:[Object(d.jsxs)("div",{className:"not-found-error__text",children:[Object(d.jsx)("span",{className:"not-found-error__code",children:"404"}),Object(d.jsx)("p",{className:"not-found-error__description",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})]}),Object(d.jsx)("button",{onClick:function(){return e.goBack()},className:"not-found-error__back",children:"\u041d\u0430\u0437\u0430\u0434"})]})},U=(a(46),n.a.createContext());var E=function(e){var t=e.handleLogOut,a=e.onUpdateUser,s=e.userData,c=s?s.name:"",o=n.a.useContext(U),i=M(),r=i.values,l=i.handleChange,m=i.errors,u=i.isValid,j=i.resetForm,h="".concat(u?"profile-form__submit":"profile-form__submit profile-form__submit__error");return n.a.useEffect((function(){o&&j(o)}),[o,j]),Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"profile",children:Object(d.jsxs)("form",{className:"profile-form",onSubmit:function(e){e.preventDefault(),a(r),setTimeout((function(){window.location.reload()}),10)},children:[Object(d.jsxs)("h1",{className:"profile-form__title",children:["\u041f\u0440\u0438\u0432\u0435\u0442, ",c,"!"]}),Object(d.jsxs)("label",{className:"profile-form__label",children:[Object(d.jsx)("label",{className:"profile-form__span",children:"\u0418\u043c\u044f"}),Object(d.jsx)("input",{className:"profile-form__input",minLength:2,type:"text",name:"name",id:"name",required:!0,autoComplete:"off",value:r.name,onChange:l}),Object(d.jsx)("span",{className:"profile__valid-name profile__valid-name_non-valid",children:m.name||""})]}),Object(d.jsx)("div",{className:"profile-form__line"}),Object(d.jsxs)("label",{className:"profile-form__label",children:[Object(d.jsx)("label",{className:"profile-form__span",children:"E-mail"}),Object(d.jsx)("input",{type:"email",name:"email",id:"email",required:!0,className:"profile-form__input",autoComplete:"off",value:r.email,onChange:l}),Object(d.jsx)("span",{className:"profile__valid-email profile__valid-email_non-valid",children:m.email||""})]}),Object(d.jsx)("button",{className:h,type:"submit",disabled:!u,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(d.jsx)(O.b,{to:"/signin",onClick:t,className:"profile-form__link",children:"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"})]})})})},L=(a(47),a(48),a(49),a.p+"static/media/UnSavedLable.880a8cd1.svg"),D=a.p+"static/media/SavedLable.85fa4ae7.svg",T=a.p+"static/media/DeleteMovieBtn.1b4d94bf.svg",P=a.p+"static/media/DeleteMovieBtnHover.b78751f8.svg";var A=function(e){var t=e.handleDeleteMovies,a=e.movie,s=e.handleSaveMovies,c=n.a.useContext(U),o=a.owner===c.id,l="".concat(a.duration),m=Object(r.h)().pathname,u=n.a.useState(!1),j=Object(i.a)(u,2),h=j[0],b=j[1],_=n.a.useState(!1),p=Object(i.a)(_,2),f=p[0],v=p[1],g="".concat(h?D:L),O="".concat(f?P:T),x=function(){var e=JSON.parse(localStorage.getItem("saved-movies"));return console.log(e),e&&e.some((function(e){return e.nameRU.includes(a.nameRU)}))};function N(e){return Math.trunc(e/60)+"\u0447 "+e%60+"\u043c"}function S(){v(!f)}return n.a.useEffect((function(){return x()?b(!0):b(!1)}),[]),Object(d.jsxs)(d.Fragment,{children:["/movies"===m&&Object(d.jsxs)("div",{className:"card",children:[Object(d.jsxs)("div",{className:"card__info",children:[Object(d.jsxs)("div",{className:"card__description",children:[Object(d.jsx)("h2",{className:"card__title",title:a.nameRU,children:a.nameRU}),Object(d.jsx)("p",{className:"card__duration",children:N(l)})]}),Object(d.jsx)("button",{className:"card__tab card__tab_add",type:"button",style:{backgroundImage:"url("+g+")"},onClick:function(){if(x()){var e=JSON.parse(localStorage.getItem("saved-movies")).find((function(e){return e.nameRU===a.nameRU}));e&&(t(e),b(!1))}else s(a),b(!0)},alt:"\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430"})]}),Object(d.jsx)("a",{className:"card__image",target:"blank",href:a.trailerLink,children:Object(d.jsx)("img",{className:"card__image",src:e.image,alt:a.nameRU})})]},a._id),o&&"/saved-movies"===m&&Object(d.jsxs)("div",{className:"card",children:[Object(d.jsxs)("div",{className:"card__info",children:[Object(d.jsxs)("div",{className:"card__description",children:[Object(d.jsx)("h2",{className:"card__title",title:a.nameRU,children:a.nameRU}),Object(d.jsx)("p",{className:"card__duration",children:N(l)})]}),Object(d.jsx)("button",{className:"card__tab card__tab_del",type:"button",style:{backgroundImage:"url("+O+")"},onClick:function(e){t(a),e.target.closest(".card").remove()},onMouseEnter:S,onMouseLeave:S,alt:"\u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0430"})]}),Object(d.jsx)("a",{className:"card__image",target:"blank",href:a.trailer,children:Object(d.jsx)("img",{className:"card__image",src:e.image,alt:a.nameRU})})]})]})};var B=function(e){var t=Object(r.h)().pathname,a=e.userData,s=e.currentUser,c=e.getUserContent,o=e.handleSetMovies,i=e.resultMessage,l=e.isLoading,m=e.handleSaveMovies,u=e.handleDeleteMovies,j=e.searchShortMovies,h=e.checkboxOn,b=e.movies,_=e.searchSubmit,p=e.renderedMovies,f=e.setSearchSubmit;function v(){var e=JSON.parse(localStorage.getItem("saved-movies"));return!0===h?j(e):!1===h?e:void 0}var g=v();return n.a.useEffect((function(){"/saved-movies"===t&&f(!1)&&c(),v(),!1===h&&v()}),[]),"/movies"===t?Object(d.jsx)("div",{className:"movies__card-list",id:"allMovies",children:void 0===p||0===p.length?l?Object(d.jsx)("p",{className:"card-list__text"}):Object(d.jsx)("p",{className:"card-list__text",children:i}):e.renderedMovies.map((function(t){return Object(d.jsx)(A,{userData:a,handleDeleteMovies:u,movie:t,handleSaveMovies:m,handleSetMovies:o,image:e.imageUrl?e.imageUrl.concat(t.image.url):t.image},t._id)}))}):Object(d.jsx)("div",{className:"movies__card-list",id:"savedMovies",children:_?void 0===b||null===b||0===b.length?l?Object(d.jsx)("p",{className:"card-list__text"}):Object(d.jsx)("p",{className:"card-list__text",children:i}):b.map((function(t){return Object(d.jsx)(A,{userData:a,currentUser:s,movie:t,owner:t.owner,handleSetMovies:o,image:e.imageUrl?e.imageUrl.concat(t.image.url):t.image},t._id)})):void 0===g||null===g||0===g.length?l?Object(d.jsx)("p",{className:"card-list__text"}):Object(d.jsx)("p",{className:"card-list__text",children:i}):g.map((function(t){return Object(d.jsx)(A,{userData:a,movie:t,owner:t.owner,handleDeleteMovies:u,handleSetMovies:o,image:e.imageUrl?e.imageUrl.concat(t.image.url):t.image},t._id)}))})},R=(a(50),a.p+"static/media/ShortOn.06824562.svg"),F=a.p+"static/media/ShortOff.c95ddc8c.svg";var J=function(e){var t=e.isLoading,a=e.checkboxOn,s=e.setcheckboxOn,c=e.handleSetMovies,o=e.handleSearchShortMovies,l=e.setSearchSubmit,m=Object(r.h)().pathname,u=n.a.useState(!1),j=Object(i.a)(u,2),h=j[0],b=j[1],_=n.a.useState(""),p=Object(i.a)(_,2),f=p[0],v=p[1],g="".concat(a?R:F);function O(){localStorage.setItem("keyword",f),c()}return Object(d.jsxs)("form",{className:"search-form",onSubmit:function(e){e.preventDefault(),f?O():b(!0),"/saved-movies"===m&&l(!0)},noValidate:"novalidate",children:[Object(d.jsxs)("label",{className:"search-form__block",children:[h&&!f&&Object(d.jsx)("span",{className:"search-form__span-error",children:"\u041d\u0443\u0436\u043d\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e"}),Object(d.jsx)("input",{className:"search-form__area",placeholder:"\u0424\u0438\u043b\u044c\u043c",value:f||"",name:"search",onChange:function(e){v(e.target.value)},disabled:t,autoComplete:"off",required:!0}),Object(d.jsx)("button",{className:"search-form__btn",type:"submit",disabled:t})]}),Object(d.jsxs)("label",{className:"search-form__filter",children:[Object(d.jsx)("input",{className:"search-form__checkbox",id:"short",type:"checkbox",onClick:function(){document.getElementById("short").checked?(localStorage.setItem("check","on"),o(),s(!0)):(localStorage.removeItem("check"),O(),s(!1))}}),Object(d.jsx)("span",{className:"search-form__checkbox-span",style:{backgroundImage:"url("+g+")"}}),"\u041a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043a\u0438"]})]})};a(51);var z=function(e){var t=e.handleMoreBtn;return e.isMoreBtnVisible&&Object(d.jsx)("div",{className:"more-btn",children:Object(d.jsx)("p",{className:"more-btn__text",onClick:t,children:"\u0415\u0449\u0451"})})},V=(a(52),function(){return Object(d.jsx)("div",{className:"preloader",children:Object(d.jsx)("div",{className:"preloader__container",children:Object(d.jsx)("span",{className:"preloader__round"})})})});var q=function(e){var t=e.userData,a=e.currentUser,s=e.isLoading,c=e.movies,o=e.handleSetMovies,l=e.handleDeleteMovies,m=e.handleSaveMovies,u=e.resultMessage,j=e.imageUrl,h=e.handleSearchShortMovies,b=e.searchShortMovies,_=n.a.useState(!1),p=Object(i.a)(_,2),f=p[0],v=p[1],g=n.a.useState([]),O=Object(i.a)(g,2),x=O[0],N=O[1],S=n.a.useState(0),k=Object(i.a)(S,2),y=k[0],M=k[1],w=n.a.useState(0),C=Object(i.a)(w,2),I=C[0],U=C[1],E=n.a.useState(!1),L=Object(i.a)(E,2),D=L[0],T=L[1],P=Object(r.h)().pathname,A=window.innerWidth;return n.a.useEffect((function(){A>=1285?(M(12),U(6)):A<1283&&A>1e3?(M(12),U(3)):A<1279&&A>768?(M(8),U(2)):(M(5),U(2))}),[A]),n.a.useEffect((function(){"/movies"===P?(N(c.slice(0,y)),c.length<=y?v(!1):v(!0)):(N(c),v(!1))}),[P,c,y]),Object(d.jsxs)("div",{className:"movies",children:[s&&Object(d.jsx)(V,{}),Object(d.jsx)(J,{handleSetMovies:o,handleSearchShortMovies:h,setcheckboxOn:T,checkboxOn:D}),Object(d.jsx)(B,{currentUser:a,userData:t,searchShortMovies:b,handleDeleteMovies:l,handleSearchShortMovies:h,handleSaveMovies:m,handleSetMovies:o,renderedMovies:x,resultMessage:u,movies:c,imageUrl:j,checkboxOn:D}),Object(d.jsx)(z,{isMoreBtnVisible:f,handleMoreBtn:function(){N(c.slice(0,x.length+I)),x.length>=c.length-I&&v(!1)}})]})};a(53);var G=function(e){var t=n.a.useState(!1),a=Object(i.a)(t,2),s=a[0],c=a[1],o=n.a.useState(!1),r=Object(i.a)(o,2),l=r[0],m=r[1],u=e.userData,j=e.currentUser,h=e.getUserContent,b=e.isLoading,_=e.movies,p=e.handleSetMovies,f=e.handleDeleteMovies,v=e.handleSaveMovies,g=e.resultMessage,O=e.imageUrl,x=e.handleSearchShortMovies,N=e.renderedMovies,S=e.searchShortMovies;return Object(d.jsxs)("div",{className:"movies__main-saved",children:[b&&Object(d.jsx)(V,{}),Object(d.jsx)(J,{handleSetMovies:p,handleSearchShortMovies:x,setSearchSubmit:c,setcheckboxOn:m,checkboxOn:l}),Object(d.jsx)(B,{currentUser:j,userData:u,getUserContent:h,searchShortMovies:S,handleDeleteMovies:f,searchSubmit:s,setSearchSubmit:c,handleSaveMovies:v,handleSetMovies:p,renderedMovies:N,resultMessage:g,movies:_,checkboxOn:l,imageUrl:O})]})},K="http://localhost:3001",H=a(20),W=a(21),Q=new(function(){function e(t){var a=t.baseUrl;t.headers;Object(H.a)(this,e),this._url=a}return Object(W.a)(e,[{key:"getUserInform",value:function(e){return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return console.log("getUserInform OK"),e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"getAllMovies",value:function(e){return fetch("".concat(this._url,"/movies"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return console.log("getAllMovies OK"),e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"updateProfileInfo",value:function(e,t){var a=e.name,s=e.email;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({name:a,email:s})}).then((function(e){if(console.log("updateProfileInfo OK"),400===e.status)throw new Error("\u041f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430.");if(409===e.status)throw new Error("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c email \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.");return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e),Promise.reject(e)}))}},{key:"createNewCard",value:function(e,t){var a=e.country,s=e.director,n=e.duration,c=e.year,o=e.description,i=e.image,r=e.trailer,l=e.nameRU,m=e.nameEN,d=e.thumbnail,u=e.movieId;return fetch("".concat(this._url,"/movies"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({country:a,director:s,duration:n,year:c,description:o,image:i,trailer:r,nameRU:l,nameEN:m,thumbnail:d,movieId:u})}).then((function(e){return console.log("\u043e\u0442\u0432\u0435\u0442: ".concat(e)),e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"deleteCard",value:function(e,t){return console.log(e),console.log("\u0442\u043e\u043a\u0435\u043d:"+t),fetch("".concat(this._url,"/movies/").concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}}]),e}())({baseUrl:"http://localhost:3001"}),X=a.p+"static/media/Union.df8eddf6.svg",Y=a.p+"static/media/Union-1.1b6082f8.svg";a(54);var Z=function(e){var t=e.isTooltipOpen,a=e.onClose,s=e.successToolTip,n=e.isTooltipProfile,c=e.isTooltipLogin,o={backgroundImage:"url("+X+")"},i={backgroundImage:"url("+Y+")"};return s?n?Object(d.jsx)("section",{className:t?"popup popup_opened":"popup",children:Object(d.jsxs)("form",{className:"popup__container popup__tip",children:[Object(d.jsx)("button",{onClick:a,className:"button button_type_close",id:"formError-close",type:"button"}),Object(d.jsx)("div",{className:"popup__image popup__image_login",style:i}),Object(d.jsx)("h2",{className:"popup__title infotooltip-title",children:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b!"})]})}):Object(d.jsx)("section",{className:t?"popup popup_opened":"popup",children:Object(d.jsxs)("form",{className:"popup__container popup__tip",children:[Object(d.jsx)("button",{onClick:a,className:"button button_type_close",id:"formError-close",type:"button"}),Object(d.jsx)("div",{className:"popup__image popup__image_login",style:i}),Object(d.jsx)("h2",{className:"popup__title infotooltip-title",children:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"})]})}):c?Object(d.jsx)("section",{className:t?"popup popup_opened":"popup",children:Object(d.jsxs)("form",{className:"popup__container popup__tip",children:[Object(d.jsx)("button",{onClick:a,className:"button button_type_close",id:"formError-close",type:"button"}),Object(d.jsx)("div",{className:"popup__image popup__image_login",style:o}),Object(d.jsx)("h2",{className:"popup__title infotooltip-title",children:"\u041f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430."})]})}):Object(d.jsx)("section",{className:t?"popup popup_opened":"popup",children:Object(d.jsxs)("form",{className:"popup__container popup__tip",children:[Object(d.jsx)("button",{onClick:a,className:"button button_type_close",id:"formError-close",type:"button"}),Object(d.jsx)("div",{className:"popup__image popup__image_login",style:o}),Object(d.jsx)("h2",{className:"popup__title infotooltip-title",children:"\u041f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430."})]})})};var $=function(){var e=n.a.useState([]),t=Object(i.a)(e,2),a=t[0],s=t[1],c=n.a.useState({}),o=Object(i.a)(c,2),l=o[0],m=o[1],j=n.a.useState(!1),h=Object(i.a)(j,2),b=h[0],_=h[1],p=n.a.useState(!1),f=Object(i.a)(p,2),g=f[0],O=f[1],x=n.a.useState(""),N=Object(i.a)(x,2),y=N[0],M=N[1],L=Object(r.g)(),D="https://api.nomoreparties.co",T=n.a.useState(""),P=Object(i.a)(T,2),A=P[0],B=P[1],R=n.a.useState({}),F=Object(i.a)(R,2),J=F[0],z=F[1],V=n.a.useState(!1),H=Object(i.a)(V,2),W=H[0],X=H[1],Y=n.a.useState(!1),$=Object(i.a)(Y,2),ee=$[0],te=$[1],ae=n.a.useState(!1),se=Object(i.a)(ae,2),ne=se[0],ce=se[1],oe=n.a.useState(!1),ie=Object(i.a)(oe,2),re=ie[0],le=ie[1];function me(){X(!1),te(!1)}function de(e){"Escape"===e.key&&me()}function ue(e){e.target.classList.contains("popup")&&me()}function je(){g&&(_(!0),Promise.all([Q.getUserInform(A),Q.getAllMovies(A)]).then((function(e){var t=Object(i.a)(e,2),a=t[0],s=t[1];m(a),localStorage.setItem("saved-movies",JSON.stringify(s)),null===localStorage.getItem("movies")&&localStorage.setItem("movies",JSON.stringify(s))})).catch((function(e){console.log(e)})).finally((function(){return _(!1)})))}function he(){_(!0),fetch("".concat("https://api.nomoreparties.co/beatfilm-movies"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})).then((function(e){localStorage.setItem("movies",JSON.stringify(e))})).catch((function(){localStorage.removeItem("movies")})).finally((function(){return _(!1)}))}function be(){if(null===localStorage.getItem("keyword")&&localStorage.setItem("keyword",""),localStorage.getItem("keyword").length>0){he();var e=function(e){function t(){return document.getElementById("allMovies")?JSON.parse(localStorage.getItem("movies")):JSON.parse(localStorage.getItem("saved-movies"))}var a=t();if(a){return a.filter((function(t){return t.nameRU.toLowerCase().includes(e.toLowerCase())}))}}(localStorage.getItem("keyword"));s(e);var t=_e(e);t&&(s(t),0===t.length&&M("\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"))}else s([]),void 0===a&&M("\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435\u043c \u0438\u043b\u0438 \u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437");localStorage.removeItem("keyword")}function _e(e){if(e){if("on"===localStorage.getItem("check")&&e.length>0){return e.filter((function(e){return e.duration<=40}))}if(0===e.length)return e}}function pe(){if(be(),a!==[]){var e=_e(a);e&&s(e)}}function fe(e){Q.deleteCard(e._id,A).then((function(){Q.getAllMovies(A).then((function(e){localStorage.setItem("saved-movies",JSON.stringify(e))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}return n.a.useEffect((function(){!function(){var e=localStorage.getItem("jwt");e&&(B(e),function(e){return fetch("".concat(K,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){if(200===e.status)return e.json();if(400===e.status)throw new Error("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435");if(401===e.status)throw new Error("\u041f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d")})).then((function(e){return e})).catch((function(e){return console.log(e),Promise.reject(e)}))}(e).then((function(e){e?(z({id:e._id,name:e.name}),O(!0),L.push("/")):localStorage.removeItem("jwt")})))}(),je()}),[g]),n.a.useEffect((function(){return window.addEventListener("keydown",de),window.addEventListener("mousedown",ue),function(){window.removeEventListener("mousedown",ue),window.removeEventListener("keydown",de)}})),Object(d.jsx)(U.Provider,{value:l,children:Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(S,{userData:J,loggedIn:g}),Object(d.jsxs)(r.d,{children:[Object(d.jsx)(r.b,{exact:!0,path:"/",children:Object(d.jsx)(v,{})}),Object(d.jsx)(u,{exact:!0,path:"/movies",currentUser:l,userData:J,loggedIn:g,component:q,searchShortMovies:_e,handleSaveMovies:function(e){console.log(A),Q.createNewCard({country:e.country||" ",director:e.director||" ",duration:e.duration.toString(),year:e.year||" ",description:e.description||" ",image:"".concat(D).concat(e.image.url)||" ",trailer:e.trailerLink||" ",nameRU:e.nameRU,nameEN:e.nameEN||" ",thumbnail:"".concat(D).concat(e.image.formats.thumbnail.url)||" ",movieId:e.id},A).then((function(e){Q.getAllMovies(A).then((function(e){localStorage.setItem("saved-movies",JSON.stringify(e))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},resultMessage:y,movies:a,handleSetMovies:be,handleSearchShortMovies:pe,handleDeleteMovies:fe,isLoading:b,imageUrl:D}),Object(d.jsx)(u,{exact:!0,path:"/saved-movies",userData:J,currentUser:l,loggedIn:g,component:G,movies:a,handleSetMovies:be,resultMessage:y,isLoading:b,handleSearchShortMovies:pe,handleDeleteMovies:fe,searchShortMovies:_e,apiMain:Q.getAllMovies,getUserContent:je}),Object(d.jsx)(u,{loggedIn:g,path:"/profile",component:E,handleLogOut:function(){O(!1),localStorage.removeItem("jwt"),L.push("/")},onUpdateUser:function(e){var t=e.name,a=e.email;Q.updateProfileInfo({name:t,email:a},A).then((function(e){m({name:e.name,email:e.email}),ce(!0),setTimeout(X(!0),100),te(!0)})).catch((function(e){}))},userData:J}),Object(d.jsx)(r.b,{path:"/signup",children:Object(d.jsx)(w,{loggedIn:g,setIsLoggedIn:O,onRegister:function(e){return(t=e,fetch("".concat(K,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,email:t.email,password:t.password})}).then((function(e){if(400===e.status)throw new Error("\u041f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430.");if(409===e.status)throw new Error("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c email \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.");return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e),Promise.reject(e)}))).then((function(e){e&&(te(!0),X(!0),L.push("/signin"))})).catch((function(e){te(!1),X(!0),console.log(e)}));var t}})}),Object(d.jsx)(r.b,{path:"/signin",children:Object(d.jsx)(C,{setIsLoggedIn:O,onLogin:function(e){return function(e,t){return fetch("".concat(K,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){if(200===e.status)return console.log("authorize OK"),e.json();if(400===e.status)throw new Error("\u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439");if(401===e.status)throw new Error("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 email \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d")})).then((function(e){if(e.token)return localStorage.setItem("jwt",e.token),e})).catch((function(e){return console.log(e.satus),Promise.reject(e)}))}(e.email,e.password).then((function(e){if(!e||!e.token)throw le(!0),X(!0),new Error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442");localStorage.setItem("jwt",e.token),B(e.token),O(!0),L.push("/movies")})).catch((function(e){le(!0),X(!0),console.log(e)}))}})}),Object(d.jsx)(r.b,{path:"*",children:Object(d.jsx)(I,{})}),Object(d.jsx)(r.b,{exact:!0,path:"/profile",children:g?Object(d.jsx)(r.a,{to:"/profile"}):Object(d.jsx)(r.a,{to:"/"})})]}),Object(d.jsx)(k,{}),Object(d.jsx)(Z,{isTooltipOpen:W,onClose:me,successToolTip:ee,isTooltipProfile:ne,isTooltipLogin:re})]})})},ee=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,56)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),s(e),n(e),c(e),o(e)}))};o.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(O.a,{children:Object(d.jsx)($,{})})}),document.getElementById("root")),ee()}]),[[55,1,2]]]);
//# sourceMappingURL=main.b94c4587.chunk.js.map